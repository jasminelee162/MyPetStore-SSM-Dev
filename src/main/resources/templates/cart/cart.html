<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Shopping Cart</title>
    <link rel="stylesheet" href="../css/cart.css" type="text/css" media="screen"/>
</head>
<body>

<header th:replace="common/top"></header>

<div id="BackLink">
    <a th:href="@{/catalog/index}">Return to Main Menu</a>
</div>

<div id="Catalog">
    <div id="Cart">
        <h2>Shopping Cart</h2>
        <form id="cart-form" th:action="@{/order/newOrder}"  method="post">
            <input type="hidden" id="selected-items" name="selectedItems" value="">

            <table>
                <thead>
                <tr>
                    <th><input type="checkbox" id="select-all"> Select All</th>
                    <th>Item ID</th>
                    <th>Product</th>
                    <th>Price</th>
                    <th>Quantity</th>
                    <th>Total</th>
                    <th>Action</th>
                </tr>
                </thead>
                <tbody id="cart-items">
                <!-- 购物车为空时的提示 -->
                <tr id="empty-cart-message" style="display:none;">
                    <td colspan="7"><b>Your cart is empty.</b></td>
                </tr>

                <!-- 购物车商品循环展示 -->
                <tr th:each="cartItem : ${session.cart.itemList}" th:id="|rank-${cartItem.item.itemId}|" class="item-id">
                    <td>
                        <input type="checkbox" class="item-select" th:data-item-id="${cartItem.item.itemId}">
                    </td>
                    <td>
                        <a th:href="'/catalog/viewItem?itemId='+${cartItem.item.itemId}" th:text="${cartItem.item.itemId}"></a>
                    </td>
                    <td class="item-info">
                        <div class="item-details">
                            <img th:src="'../'+${cartItem.item.descriptionImage}">
<!--                            <label th:text="${cartItem.item.descriptionText}"></label>-->
                        </div>
                    </td>
                    <td th:id="|single-price-${cartItem.item.itemId}|">
                        <span th:text="${#numbers.formatCurrency(cartItem.item.listPrice)}"></span>
                    </td>
                    <td>
                        <button type="button" class="quantity-decrease" th:data-item-id="${cartItem.item.itemId}">-</button>
                        <input type="text" th:name="${cartItem.item.itemId}" th:value="${cartItem.quantity}"
                               class="item-quantity" th:id="|item-quantity-${cartItem.item.itemId}|"
                               th:data-item-id="${cartItem.item.itemId}">
                        <button type="button" class="quantity-increase" th:data-item-id="${cartItem.item.itemId}">+</button>
                    </td>
                    <td th:id="|total-price-${cartItem.item.itemId}|">
                        <span th:text="${#numbers.formatCurrency(cartItem.totalPrice)}"></span>
                    </td>
                    <td>
                        <button type="button" class="Button" th:id="remove-item" th:data-item-id="${cartItem.item.itemId}">Remove</button>
                    </td>
                </tr>
                </tbody>
            </table>
        </form>

        <div id="cart-summary">
            <span>Total items: <span id="selected-count" th:text="${session.cart.numberOfItems}"></span></span>
            <span>Subtotal: <span id="subTotal" th:text="${#numbers.formatCurrency(session.cart.subTotal)}"></span></span>
            <button type="submit" id="proceed-checkout" class="Button">Proceed to Checkout</button>
        </div>
    </div>

<!--    <div id="MyList" th:if="${session.loginAccount != null}">-->
<!--        <div th:if="${session.loginAccount.listOption}">-->
<!--            <div th:replace="includeMyList"></div>-->
<!--        </div>-->

<!--    </div>-->

    <div id="Separator">&nbsp;</div>

    <div id="tooltip" class="tooltip"></div>
</div>

<script src="../js/updateAuto.js"></script>

<footer th:replace="common/bottom"></footer>

</body>
</html>
