<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet"  href="/css/newOrder.css" type="text/css" media="screen"/>

</head>
<body>

<!-- 引入 top.jsp 替换版 -->
<header th:replace="common/top"></header>

<!--<div id="Catalog" style="max-width: 900px; margin: 0 auto; padding: 2em; background-color: #ffffff; box-shadow: 0 0 15px rgba(0, 0, 0, 0.1); border-radius: 8px;">-->
    <form th:action="@{/order/confirmOrder}" th:object="${orderForm}" method="post">
        <div class="table-container right-table">
        <!-- Table 1: Payment Details & Shipping Address -->
        <table>
<!--        <table style="width: 100%; border-collapse: collapse;">-->
            <!-- Payment Details Section -->
            <tr>
                <th colspan="2" style="background-color: #1d4886; color: white; padding: 1em; text-align: left; border-top-left-radius: 8px; border-top-right-radius: 8px;">Payment Details</th>
            </tr>

            <tr>
                <td style="padding: 0.75em 0; width: 40%; vertical-align: middle;">
                    <label for="cardType">Card Type:</label>
                </td>
                <td style="padding: 0.75em 0;">
                    <select th:field="*{cardType}" id="cardType" style="width: 100%; max-width: 350px;">
                        <option value="Visa">Visa</option>
                        <option value="MasterCard">MasterCard</option>
                        <option value="American Express">American Express</option>
                    </select>
                </td>
            </tr>

            <tr>
                <td><label for="creditCard">Card Number:</label></td>
                <td>
                    <input type="text" th:field="*{creditCard}" id="creditCard" style="width: 100%; max-width: 350px;">
                    <span>* Use a fake number!</span>
                </td>
            </tr>

            <tr>
                <td><label for="expiryDate">Expiry Date (MM/YYYY):</label></td>
                <td>
                    <input type="text" th:field="*{exprDate}" id="expiryDate" style="width: 100%; max-width: 350px;">
                </td>
            </tr>

            <!-- Shipping Address Section -->
            <tr>
                <th colspan="2" style="background-color: #1d4886; color: white; padding: 1em; text-align: left;">Shipping Address</th>
            </tr>

            <tbody id="shippingAddressSection" style="display: none;">
            <tr>
                <td><label for="shipToFirstName">First Name:</label></td>
                <td><input type="text" th:field="*{shipToFirstName}" id="shipToFirstName" style="width: 100%; max-width: 350px;"></td>
            </tr>

            <tr>
                <td><label for="shipToLastName">Last Name:</label></td>
                <td><input type="text" th:field="*{shipToLastName}" id="shipToLastName" style="width: 100%; max-width: 350px;"></td>
            </tr>

            <tr>
                <td><label for="shipAddress1">Address 1:</label></td>
                <td><input type="text" th:field="*{shipAddr1}" id="shipAddress1" style="width: 100%; max-width: 350px;"></td>
            </tr>

            <tr>
                <td><label for="shipAddress2">Address 2:</label></td>
                <td><input type="text" th:field="*{shipAddr2}" id="shipAddress2" style="width: 100%; max-width: 350px;"></td>
            </tr>

            <tr>
                <td><label for="shipCity">City:</label></td>
                <td><input type="text" th:field="*{shipCity}" id="shipCity" style="width: 100%; max-width: 350px;"></td>
            </tr>

            <tr>
                <td><label for="shipState">State:</label></td>
                <td><input type="text" th:field="*{shipState}" id="shipState" style="width: 100%; max-width: 350px;"></td>
            </tr>

            <tr>
                <td><label for="shipZip">Zip:</label></td>
                <td><input type="text" th:field="*{shipZip}" id="shipZip" style="width: 100%; max-width: 350px;"></td>
            </tr>

            <tr>
                <td><label for="shipCountry">Country:</label></td>
                <td><input type="text" th:field="*{shipCountry}" id="shipCountry" style="width: 100%; max-width: 350px;"></td>
            </tr>
            </tbody>

            <!-- Checkbox to toggle shipping address -->
            <tr>
                <td colspan="2" style="padding: 1em 0;">
                    <label>
                        <input type="checkbox" id="shippingAddressRequired" name="shippingAddressRequired">
                        Ship to different address...
                    </label>
                </td>
            </tr>
        </table>
        </div>
        <!-- Table 2: Billing Address -->
        <div class="table-container left-table">
        <table>
<!--        <table style="width: 100%; border-collapse: collapse; margin-top: 20px;">-->
            <!-- Billing Address Section -->
            <tr>
                <th colspan="2" style="background-color: #1d4886; color: white; padding: 1em; text-align: left;">Billing Address</th>
            </tr>

            <tr>
                <td><label for="billToFirstName">First Name:</label></td>
                <td><input type="text" th:field="*{billToFirstName}" id="billToFirstName" style="width: 100%; max-width: 350px;"></td>
            </tr>

            <tr>
                <td><label for="billToLastName">Last Name:</label></td>
                <td><input type="text" th:field="*{billToLastName}" id="billToLastName" style="width: 100%; max-width: 350px;"></td>
            </tr>

            <tr>
                <td><label for="billAddress1">Address 1:</label></td>
                <td><input type="text" th:field="*{billAddr1}" id="billAddress1" style="width: 100%; max-width: 350px;"></td>
            </tr>

            <tr>
                <td><label for="billAddress2">Address 2:</label></td>
                <td><input type="text" th:field="*{billAddr2}" id="billAddress2" style="width: 100%; max-width: 350px;"></td>
            </tr>

            <tr>
                <td><label for="billCity">City:</label></td>
                <td><input type="text" th:field="*{billCity}" id="billCity" style="width: 100%; max-width: 350px;"></td>
            </tr>

            <tr>
                <td><label for="billState">State:</label></td>
                <td><input type="text" th:field="*{billState}" id="billState" style="width: 100%; max-width: 350px;"></td>
            </tr>

            <tr>
                <td><label for="billZip">Zip:</label></td>
                <td><input type="text" th:field="*{billZip}" id="billZip" style="width: 100%; max-width: 350px;"></td>
            </tr>

            <tr>
                <td><label for="billCountry">Country:</label></td>
                <td><input type="text" th:field="*{billCountry}" id="billCountry" style="width: 100%; max-width: 350px;"></td>
            </tr>
        </table>
        </div>

        <div class="button-container">
            <button type="submit" style="background-color: #1d4886; color: white; padding: 1em 2em; border: none; border-radius: 4px; cursor: pointer;">Continue</button>
        </div>
    </form>
<!--</div>-->

<script>
    function toggleShippingAddress() {
        const shippingSection = document.getElementById('shippingAddressSection');
        const checkbox = document.getElementById('shippingAddressRequired');
        shippingSection.style.display = checkbox.checked ? 'table-row-group' : 'none';
    }

    document.getElementById('shippingAddressRequired').addEventListener('change', toggleShippingAddress);
    window.onload = toggleShippingAddress;
</script>
<script type="module">
    import * as THREE from 'https://cdn.skypack.dev/three@0.136.0/build/three.module.js';
    import { OrbitControls } from 'https://cdn.skypack.dev/three@0.136.0/examples/jsm/controls/OrbitControls.js';
    import { UnrealBloomPass } from 'https://cdn.skypack.dev/three@0.136.0/examples/jsm/postprocessing/UnrealBloomPass.js';
    import { EffectComposer } from 'https://cdn.skypack.dev/three@0.136.0/examples/jsm/postprocessing/EffectComposer.js';
    import { RenderPass } from 'https://cdn.skypack.dev/three@0.136.0/examples/jsm/postprocessing/RenderPass.js';
    import { ShaderPass } from 'https://cdn.skypack.dev/three@0.136.0/examples/jsm/postprocessing/ShaderPass.js';
    import { DotScreenPass } from 'https://cdn.skypack.dev/three@0.136.0/examples/jsm/postprocessing/DotScreenPass.js';
    import { GlitchPass } from 'https://cdn.skypack.dev/three@0.136.0/examples/jsm/postprocessing/GlitchPass.js';
    import { GUI } from 'https://cdn.skypack.dev/dat.gui';
    import { gsap } from 'https://cdn.skypack.dev/gsap@3.7.1';

    let scene, camera, renderer, composer, bloomPass, noisePass, controls, sphere, glitchPass, dotScreenPass;
    let guiParams = {
        deformAmount: 0.1,
        transparency: 0.5,
        iridescenceIntensity: 1.0,
        noiseStrength: 0.2,
        bloomStrength: 3,
        bloomRadius: 0.4,
        bloomThreshold: 0,
        activateGlitch: false,
        dotScale: 0.1,
        activateDotScreen: true
    };

    init();
    animate();

    function init() {
        scene = new THREE.Scene();

        camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(0, 0, 3);

        renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        document.body.appendChild(renderer.domElement);

        const geometry = new THREE.SphereGeometry(1, 16, 16);
        const material = new THREE.MeshPhongMaterial({
            color: 0xffffff,
            wireframe:true,
            transparent: true,
            opacity: guiParams.transparency
        });
        sphere = new THREE.Mesh(geometry, material);
        scene.add(sphere);

        const light = new THREE.PointLight(0xffffff, 1);
        light.position.set(5, 5, 5);
        scene.add(light);

        controls = new OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;

        composer = new EffectComposer(renderer);
        composer.addPass(new RenderPass(scene, camera));

        // GlitchPass
        glitchPass = new GlitchPass();
        glitchPass.enabled = false;
        composer.addPass(glitchPass);

        // BloomPass
        bloomPass = new UnrealBloomPass(
            new THREE.Vector2(window.innerWidth, window.innerHeight),
            guiParams.bloomStrength, guiParams.bloomRadius,
            guiParams.bloomThreshold);
        composer.addPass(bloomPass);

        // DotScreenPass
        dotScreenPass = new DotScreenPass(new THREE.Vector2(0, 0), guiParams.dotScale);
        dotScreenPass.enabled = true;
        composer.addPass(dotScreenPass);

        window.addEventListener('resize', onWindowResize);
    }

    function updateDeformation() {
        const positionAttribute = sphere.geometry.attributes.position;
        const vertex = new THREE.Vector3();

        for (let i = 0; i < positionAttribute.count; i++) {
            vertex.fromBufferAttribute(positionAttribute, i);
            vertex.normalize().multiplyScalar(1 + guiParams.deformAmount * Math.sin(vertex.length() * 15));
            positionAttribute.setXYZ(i, vertex.x, vertex.y, vertex.z);
        }
        positionAttribute.needsUpdate = true;
    }

    function onWindowResize() {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
        composer.setSize(window.innerWidth, window.innerHeight);
    }

    function animate() {
        requestAnimationFrame(animate);

        sphere.rotation.x += 0.001;
        sphere.rotation.y += 0.005;
        sphere.rotation.z += 0.001;

        controls.update();
        composer.render();
    }
    // createTitles()
    function createTitles() {
        const title1 = document.createElement('h3');
        title1.classList.add('title', '_1');
        title1.textContent = 'three.js + Sphere';

        const title2 = document.createElement('h3');
        title2.classList.add('title', '_2');
        // title2.textContent = 'double click';

        const title3 = document.createElement('h3');
        title3.classList.add('title', '_3');
        title3.textContent = 'Fullscreen on';
        title3.addEventListener('click', toggleFullscreen);

        document.body.appendChild(title1);
        document.body.appendChild(title2);
        document.body.appendChild(title3);

        document.querySelector('.title._1').style.top = '20px';
        document.querySelector('.title._1').style.left = '30px';

        document.querySelector('.title._2').style.bottom = '20px';
        document.querySelector('.title._2').style.left = '30px';

        document.querySelector('.title._3').style.bottom = '20px';
        document.querySelector('.title._3').style.right = '30px';
        document.querySelector('.title._3').style.cursor = 'pointer';
    }

    function toggleFullscreen() {
        if (!document.fullscreenElement) {
            document.documentElement.requestFullscreen();
            document.querySelector('.title._3').textContent = 'Fullscreen off';
        } else if (document.exitFullscreen) {
            document.exitFullscreen();
            document.querySelector('.title._3').textContent = 'Fullscreen on';
        }
    }

</script>
<!-- 引入 bottom.jsp 替换版 -->
<footer th:replace="common/bottom"></footer>

</body>
</html>
